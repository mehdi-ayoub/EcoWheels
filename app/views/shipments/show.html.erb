<% content_for :meta_title, "#{@shipment.city} is on #{DEFAULT_META["meta_name"]}" %>
<% content_for :meta_description, @shipment.product_name %>
<%# <% content_for :meta_image, cl_image_path(@shipment.end_location) if @shipment.end_location %>

<%= render "shared/master_navbar" %>

<div class="container-banner"></div>

<div class="navbar navbar-expand-lg navbar-light">
  <div class="container-fluid">
      <ul class="navbar-nav me-auto">
        <li class="nav-item custom-padding-left">
          <%= link_to "Back to Shipments", shipments_path, class: "nav-link", class: "btn btn-outline-secondary my-3" %>
        </li>
      </ul>
  </div>
</div>

<div class="container mt-5">
  <div class="row content-row">

    <!-- Shipment Info -->
        <div class="col-md-6 p-4 info-container">
      <div class="showpage-card shadow">
        <div class="showpage-card-body">
          <span class="card-author subtle">The shipment product</span>
          <h2 class="showpage-card-title"><%= @shipment.product_name %></h2>
          <ul class="list-unstyled mt-4">
            <li>City: <strong><%= @shipment.city %></strong></li>
            <li>Distance traveled: <strong><%= @shipment.distance_traveled %></strong> </li>
            <li>Vehicle type: <strong><%= @shipment.vehicle_type %></strong></li>
            <li>Fuel type: <strong><%= @shipment.fuel_type %></strong></li>
            <li>Fuel consumption: <strong><%= @shipment.fuel_consumption %> l</strong></li>
            <li>Shipment start: <strong><%= @shipment.shipment_start ? @shipment.shipment_start.strftime("%A, %d %b %Y") : "N/A" %></strong></li>
            <li>Shipment end: <strong><%= @shipment.shipment_end ? @shipment.shipment_end.strftime("%A, %d %b %Y") : "N/A" %></strong></li>
            <li>CO2 emissions: <strong><%= @shipment.co2_emissions %></strong></li>
            <li class="mt-2 text-muted">Last updated <%= time_ago_in_words @shipment.updated_at %></li>
          </ul>
          <div class="mt-3">
            <%= link_to shipment_path(@shipment), data: { controller: "delete-confirmation", action: "click->delete-confirmation#confirm" }, class: 'btn btn-outline-danger bin-icon' do %>
              <i class="fa fa-pencil fa-trash"></i>
            <% end %>
            <%= link_to edit_shipment_path(@shipment), class: 'btn btn-outline-primary ml-2' do %>
              <i class="fa fa-pencil"></i>
            <% end %>
          </div>
            <div class="card-read"></div>
            <span class="card-tag card-circle subtle">C</span>
        </div>
      </div>
    </div>

    <!-- Map -->
      <div class="col-md-6 map-wrapper p-4">
        <div class="map-container shadow" data-controller="map" data-map-markers-value="<%= @markers.to_json %>" data-map-api-key-value="<%= ENV['MAPBOX_API_KEY'] %>"></div>
      </div>
    </div>

  <!-- Return to previous page -->
  <%# <div class="row mt-4 p-4">
    <div class="col-12">
      <%= link_to "Return to the previous page", shipments_path, class: "btn btn-outline-secondary" %>
    <%# </div>
  </div> %> 
</div>
